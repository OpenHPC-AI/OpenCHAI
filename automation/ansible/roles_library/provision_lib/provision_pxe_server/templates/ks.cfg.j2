# -------------------------------------------------
# Unattended Install Kickstart
# Managed by Ansible â€“ DO NOT EDIT
# -------------------------------------------------

# 1. Install Mode
text

# 2. X Window Configuration
skipx

# 3. Install Source
url --url={{ ks_baseos_url }}
repo --name="AppStream" --baseurl={{ ks_appstream_url }}

# 4. Localization
keyboard --vckeymap={{ ks_keyboard }} --xlayouts='{{ ks_keyboard }}'
lang {{ ks_lang }}
timezone {{ ks_timezone }} --isUtc

# 5. Network Configuration
network --bootproto={{ ks_bootproto }} --device=link --activate

# 6. Root Password
rootpw --plaintext {{ ks_root_password }}

# 7. Bootloader
bootloader --location={{ ks_bootloader_location }} --append="{{ ks_bootloader_args }}"

# 8. Fetch and include custom partitioning
%pre
curl -f -o /tmp/partition.cfg {{ ks_partition_url }}
%end

%include /tmp/partition.cfg

# 9. Post-install Reboot
reboot

# 10. Software Selection
%packages
@^{{ ks_environment }}
@system-tools
@standard
{% for pkg in ks_extra_packages %}
{{ pkg }}
{% endfor %}
%end
